<div class="top-container">
  <div class="header-container">
    <h1>Welcome Back, {{ username }}!</h1>
    <button class="view-btn" (click)="openViewModal()">View</button>
    <button class="upload-btn" (click)="openModal()">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
        <polyline points="17 8 12 3 7 8"/>
        <line x1="12" y1="3" x2="12" y2="15"/>
      </svg>
      Upload Documents
    </button>
  </div>
  <div class="content-container">
    <!-- Documents Section -->
    <div class="total-documents">
      <div class="section-header">
        <h3>Total of Documents Submitted</h3>
        
      </div>
      <p>{{ totalDocuments }}</p>
    </div>
    
    <!-- Tasks Section -->
    <div class="total-tasks">
      <div class="section-header">
        <h3>Total of Assigned Tasks</h3>
        
      </div>
      <p>{{ totalAssignedTasks }}</p>
    </div>
  </div>
</div>

<!-- Update the existing company-resources div in home.component.html -->
<div class="company-resources">
  <h3>Company Policy</h3>
  
  <div class="policy-content">
    <h2 class="policy-title">Company Policy</h2>
    
    <div class="policy-section">
      <h3 class="section-title">Welcome to TechHorizon Inc.</h3>
      <p>At TechHorizon Inc., we believe in maintaining a transparent, inclusive, and respectful workplace that encourages innovation and collaboration. Our company policies serve as a framework to ensure every employee, client, and partner feels valued and empowered.</p>
    </div>

    <div class="policy-section">
      <h3 class="section-title">Equal Opportunity Employment</h3>
      <p>TechHorizon Inc. is committed to being an equal opportunity employer. We embrace diversity and prohibit discrimination or harassment of any kind. We ensure fair treatment regardless of race, gender, religion, age, national origin, disability, marital status, sexual orientation, or any legally protected status.</p>
    </div>

    <div class="policy-section">
      <h3 class="section-title">Professional Conduct</h3>
      <p>We hold our team to the highest standards of professionalism. Employees must:</p>
      <ul>
        <li>Show respect to colleagues, clients, and partners.</li>
        <li>Adhere to company procedures and ethical practices.</li>
        <li>Maintain confidentiality and avoid conflicts of interest.</li>
      </ul>
    </div>

    <div class="policy-section">
      <h3 class="section-title">Attendance and Punctuality</h3>
      <p>Reliability and timeliness are essential to our success. Employees should:</p>
      <ul>
        <li>Arrive on time and maintain consistent attendance.</li>
        <li>Notify supervisors promptly in case of absences or delays.</li>
      </ul>
    </div>

    <div class="policy-section">
      <h3 class="section-title">Safety First</h3>
      <p>Creating a safe work environment is a priority. Employees must:</p>
      <ul>
        <li>Follow safety guidelines and protocols.</li>
        <li>Report unsafe conditions or accidents immediately.</li>
        <li>Use equipment responsibly to prevent hazards.</li>
      </ul>
    </div>

    <div class="policy-section">
      <h3 class="section-title">Zero Tolerance for Harassment</h3>
      <p>We are dedicated to a harassment-free workplace. Any form of harassment, including sexual harassment, is strictly prohibited. Concerns should be reported to Human Resources or a supervisor and will be addressed confidentially and swiftly.</p>
    </div>

    <div class="policy-section">
      <h3 class="section-title">Dress Code</h3>
      <p>Our dress code reflects our professional brand. Employees are expected to dress appropriately for their roles, ensuring a clean and professional appearance at all times.</p>
    </div>

    <div class="policy-section">
      <h3 class="section-title">Protecting Confidentiality</h3>
      <p>Confidentiality is critical to our operations. Employees must:</p>
      <ul>
        <li>Safeguard proprietary information.</li>
        <li>Respect client and partner privacy.</li>
        <li>Avoid unauthorized sharing of sensitive data.</li>
      </ul>
    </div>

    <div class="policy-section">
      <h3 class="section-title">Employee Benefits</h3>
      <p>We offer competitive benefits to support our team, including health insurance, retirement plans, and paid time off. Details are available upon employment.</p>
    </div>

    <div class="policy-section">
      <h3 class="section-title">Acknowledgment</h3>
      <p>By engaging with TechHorizon Inc., you agree to uphold these policies. Together, we can build a workplace that reflects our shared values and drives mutual success.</p>
      <p class="closing-text">Thank you for being a part of TechHorizon Inc. Let's innovate and grow together.</p>
    </div>
  </div>
</div>

<app-task-timeline-chart [tasks]="userTasks"></app-task-timeline-chart>

<!-- File Upload Modal -->
<div *ngIf="isModalOpen" class="modal-overlay" (click)="closeModal()">
  <div class="modal" (click)="$event.stopPropagation()">
    <div class="drag-area" (drop)="onFileDrop($event)" (dragover)="onDragOver($event)">
      <p>Drag your files here</p>
      <input type="file" (change)="onFileSelected($event)" multiple accept=".jpg,.jpeg,.png,.gif,.pdf" />
    </div>

    <!-- File Preview and Type Selection -->
    <div class="scrollable-container">
      <div class="file-preview-container">
        <div *ngIf="selectedFiles.length > 0; else noFilesTemplate">
          <div *ngFor="let fileObj of selectedFiles; let i = index" class="file-preview-item">
            <button class="remove-file-btn" (click)="removeFile(i)">√ó</button>
            <div class="preview-content">
              <img *ngIf="fileObj.preview.startsWith('data:image')" [src]="fileObj.preview" alt="File Preview" />
              <div *ngIf="fileObj.preview.startsWith('data:application/pdf')" class="pdf-preview">
                PDF
              </div>
              
              <div class="file-details">
                <p>{{ fileObj.file.name }}</p>
                <select [(ngModel)]="fileObj.documentType" class="document-type-select">
                  <option value="">Select Document Type</option>
                  <option *ngFor="let type of documentTypes" [value]="type">{{ type }}</option>
                </select>
              </div>
            </div>
          </div>
        </div>
        <!-- Placeholder Template -->
        <ng-template #noFilesTemplate>
          <p class="placeholder-text">No files uploaded. Start by uploading your documents.</p>
        </ng-template>
      </div>
    </div>



    <div class="buttons-container">
      <button class="cancel-btn" (click)="closeModal()">Cancel</button>
      <button class="submit-btn" (click)="submitFile()">Submit</button>
    </div>
  </div>
</div>

  <!-- View Documents Modal -->
  <div *ngIf="isViewModalOpen" class="modal-overlay" (click)="closeViewModal()">
    <div class="modal-view" (click)="$event.stopPropagation()">
      <button class="close-btn" (click)="closeViewModal()">√ó</button>
      <h3>View Submitted Documents</h3>
      <div class="documents-list">
        <table *ngIf="userFiles.length > 0; else noDocumentsTemplate">
          <thead>
            <tr>
              <th>Filename</th>
              <th>Document Type</th>
              <th>Upload Date</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let file of userFiles">
              <td>{{ file.filename }}</td>
              <td>{{ file.docstype }}</td>
              <td>{{ file.upload_date }}</td>
              <td>
                <button class="delete-file-btn" (click)="deleteFile(file.id)">
                  üóëÔ∏è
                </button>
              </td>
            </tr>
          </tbody>
        </table>
        <ng-template #noDocumentsTemplate>
          <p>No documents have been uploaded yet.</p>
        </ng-template>
      </div>
    </div>
  </div>
  <!-- New Tasks View Modal -->
<div *ngIf="isTaskViewModalOpen" class="modal-overlay" (click)="closeTaskViewModal()">
  <div class="modal-view" (click)="$event.stopPropagation()">
    <button class="close-btn" (click)="closeTaskViewModal()">√ó</button>
    <h3>View Assigned Tasks</h3>
    <div class="tasks-list">
      <table *ngIf="userTasks.length > 0; else noTasksTemplate">
        <thead>
          <tr>
            <th>Task Name</th>
            <th>Description</th>
            <th>Instructions</th>
            <th>Due Date</th>
            <th>Status</th>
            <th>Created By</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let task of userTasks">
            <td>{{ task.task_name }}</td>
            <td>{{ task.task_description }}</td>
            <td>{{ task.task_instructions }}</td>
            <td>{{ formatDate(task.due_date) }}</td>
            <td>{{ task.status }}</td>
            <td>{{ task.created_by }}</td>
          </tr>
        </tbody>
      </table>
      <ng-template #noTasksTemplate>
        <p>No tasks have been assigned yet.</p>
      </ng-template>
    </div>
  </div>
</div>